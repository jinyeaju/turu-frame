{"ast":null,"code":"import HeaderArea from './components/HeaderArea.vue';\nimport PageOne from './components/PageOne.vue';\nimport PageTwo from './components/PageTwo.vue';\nimport PageThree from './components/PageThree.vue';\nimport PageFour from './components/PageFour.vue';\nimport FooterArea from './components/FooterArea.vue';\nimport { ref, onMounted, onBeforeUnmount, computed } from 'vue';\nconst __default__ = {\n  name: 'App',\n  components: {\n    HeaderArea,\n    PageOne,\n    PageTwo,\n    PageThree,\n    PageFour,\n    FooterArea\n  },\n  data() {\n    return {};\n  },\n  methods: {},\n  setup() {\n    const footerArea = ref(null);\n    const mainPage = ref(null);\n    const heightPercentage = ref(null);\n    const LastHeightPercentage = ref(null);\n    const timer = ref(null);\n    const setList = ref({\n      activePageIndex: 0,\n      eventRoading: false,\n      emptyArr: []\n    });\n    onMounted(() => {\n      window.scrollTo(0, 0);\n      //{passive : false}는 이 함수가 작동하는지에 대해 능동적 감시를 false 시킨다.\n      window.addEventListener(\"scroll\", function (e) {\n        e.preventDefault(); // 기본 이벤트 차단 \n      }, {\n        passive: false\n      });\n      document.addEventListener('scroll', onScroll);\n\n      // 각 페이지의 .top 높이 구하기\n      const boxArray = mainPage.value.children;\n      for (let i = 0; i < boxArray.length; i++) {\n        // console.log(boxArray[i].getBoundingClientRect().top);\n        setList.value.emptyArr[i] = `${boxArray[i].getBoundingClientRect().top}`;\n      }\n      console.log(setList.value.emptyArr);\n    });\n    onBeforeUnmount(() => {\n      document.removeEventListener('scroll', onScroll);\n    });\n    const onScroll = () => {\n      if (timer.value !== null) {\n        clearTimeout(timer.value);\n      }\n      timer.value = setTimeout(function () {\n        // vh 단위 퍼센테이지 구하기\n        heightPercentage.value = window.scrollY / window.outerHeight * 100;\n        console.log(\"window.scrollTop : \" + heightPercentage.value);\n        // scroll direction(방향) 확인\n        const scrollDirection = heightPercentage.value > LastHeightPercentage.value ? \"Down\" : \"Up\";\n        console.log(\"scrollDirection : \" + scrollDirection);\n        // 현재의 스크롤 값을 저장\n        LastHeightPercentage.value = heightPercentage.value;\n        if (scrollDirection === \"Down\") {\n          if (setList.value.activePageIndex >= setList.value.emptyArr.length - 1) {\n            // console.log(setList.value.emptyArr.length);\n            // console.log(setList.value.activePageIndex);\n            if (setList.value.activePageIndex == setList.value.emptyArr.length - 1) {\n              setList.value.activePageIndex = setList.value.emptyArr.length - 1;\n              // setList.value.activePageIndex = setList.value.emptyArr.length - 1\n              // console.log(setList.value.emptyArr.length);\n              // console.log(setList.value.activePageIndex);\n            }\n          } else {\n            setList.value.activePageIndex++;\n            console.log(setList.value.activePageIndex);\n          }\n        } else {\n          if (setList.value.activePageIndex < 0) {\n            setList.value.activePageIndex = 0;\n            console.log(setList.value.activePageIndex);\n          } else {\n            setList.value.activePageIndex--;\n            console.log(setList.value.activePageIndex);\n          }\n        }\n      }, 150);\n    };\n    const firstPageTopMove = computed(() => {\n      if (setList.value.activePageIndex < 0) {\n        return \"0\";\n      } else {\n        // console.log((-100 * setList.value.activePageIndex) + \"vh\")\n        return -100 * setList.value.activePageIndex + \"vh\";\n      }\n    });\n    const secondPageTopMove = computed(() => {\n      if (setList.value.activePageIndex >= 0) {\n        // console.log(100 + (-100 * setList.value.activePageIndex) + \"vh\")\n        return 100 + -100 * setList.value.activePageIndex + \"vh\";\n      } else {\n        return \"100vh\";\n      }\n    });\n    const thirdPageTopMove = computed(() => {\n      if (setList.value.activePageIndex >= 0) {\n        // console.log(200 + (-100 * setList.value.activePageIndex) + \"vh\")\n        return 200 + -100 * setList.value.activePageIndex + \"vh\";\n      } else {\n        return \"200vh\";\n      }\n    });\n    const fourthPageTopMove = computed(() => {\n      if (setList.value.activePageIndex >= 0) {\n        console.log(300 + -100 * setList.value.activePageIndex + \"vh\");\n        if (setList.value.activePageIndex == setList.value.emptyArr.length - 1) {\n          return \"calc(0vh - 64px)\";\n        } else {\n          return 300 + -100 * setList.value.activePageIndex + \"vh\";\n        }\n      } else {\n        return \"300vh\";\n      }\n    });\n    const footerTopMove = computed(() => {\n      if (setList.value.activePageIndex == setList.value.emptyArr.length - 1) {\n        return \"calc(100vh - 64px)\";\n      } else {\n        return \"100vh\";\n      }\n    });\n    return {\n      footerArea,\n      mainPage,\n      timer,\n      heightPercentage,\n      LastHeightPercentage,\n      setList,\n      firstPageTopMove,\n      secondPageTopMove,\n      thirdPageTopMove,\n      fourthPageTopMove,\n      footerTopMove\n    };\n  }\n};\nimport { useCssVars as _useCssVars } from 'vue';\nconst __injectCSSVars__ = () => {\n  _useCssVars((_vm, _setup) => ({\n    \"7ba5bd90-firstPageTopMove\": _vm.firstPageTopMove,\n    \"7ba5bd90-secondPageTopMove\": _vm.secondPageTopMove,\n    \"7ba5bd90-thirdPageTopMove\": _vm.thirdPageTopMove,\n    \"7ba5bd90-fourthPageTopMove\": _vm.fourthPageTopMove,\n    \"7ba5bd90-footerTopMove\": _vm.footerTopMove\n  }));\n};\nconst __setup__ = __default__.setup;\n__default__.setup = __setup__ ? (props, ctx) => {\n  __injectCSSVars__();\n  return __setup__(props, ctx);\n} : __injectCSSVars__;\nexport default __default__;","map":{"version":3,"mappings":"AAeA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;EACAA;EACAC;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;EACA;EACAC;IACA,QAEA;EACA;EAGAC,UACA;EACAC;IACA;IACA;IACA;IACA;IACA;IACA,oBACA;MACAC;MACAC;MACAC;IACA,EACA;IAEAC;MACAC;MACA;MACAA;QACAC;MACA;QAAAC;MAAA;MAEAC;;MAEA;MACA;MACA;QACA;QACAC;MACA;MACAC;IACA;IACAC;MACAH;IACA;IAEA;MACA;QACAI;MACA;MACAC;QAEA;QACAC;QACAJ;QACA;QACA;QACAA;QACA;QACAK;QACA;UACA;YACA;YACA;YACA;cACAN;cACA;cACA;cACA;YACA;UACA;YACAA;YACAC;UACA;QACA;UACA;YACAD;YACAC;UACA;YACAD;YACAC;UACA;QACA;MAEA;IACA;IAEA;MACA;QACA;MACA;QACA;QACA;MACA;IACA;IAEA;MACA;QACA;QACA;MACA;QACA;MACA;IACA;IAEA;MACA;QACA;QACA;MACA;QACA;MACA;IACA;IAEA;MACA;QACAA;QACA;UACA;QACA;UACA;QACA;MACA;QACA;MACA;IACA;IAEA;MACA;QACA;MACA;QACA;MACA;IACA;IAEA;MACAM;MACAC;MACAJ;MACAC;MACAC;MACAN;MACAS;MACAC;MACAC;MACAC;MACAC;IACA;EACA;AACA","names":["name","components","HeaderArea","PageOne","PageTwo","PageThree","PageFour","FooterArea","data","methods","setup","activePageIndex","eventRoading","emptyArr","onMounted","window","e","passive","document","setList","console","onBeforeUnmount","clearTimeout","timer","heightPercentage","LastHeightPercentage","footerArea","mainPage","firstPageTopMove","secondPageTopMove","thirdPageTopMove","fourthPageTopMove","footerTopMove"],"sourceRoot":"src","sources":["App.vue"],"sourcesContent":["<template>\n  <HeaderArea :hPercent=\"heightPercentage\"/>\n  <div class=\"page\" ref=\"mainPage\">\n    <PageOne class=\"index-page-01 pageOne\" :hPercent=\"heightPercentage\"/>\n    <PageTwo class=\"index-page-02 pageTwo\" :hPercent=\"heightPercentage - 100\"/>\n    <PageThree class=\"index-page-03 pageThree\" :hPercent=\"heightPercentage - 200\"/>\n    <PageFour class=\"index-page-04 pageFour\" :hPercent=\"heightPercentage - 300\"/>\n    <div class=\"footerArea\">\n      <FooterArea class=\"index-page-05\" :hPercent=\"heightPercentage\" ref=\"footerArea\"/>\n    </div>\n  </div>\n  \n</template>\n\n<script>\nimport HeaderArea from './components/HeaderArea.vue'\nimport PageOne from './components/PageOne.vue'\nimport PageTwo from './components/PageTwo.vue'\nimport PageThree from './components/PageThree.vue'\nimport PageFour from './components/PageFour.vue'\nimport FooterArea from './components/FooterArea.vue'\nimport { ref, onMounted, onBeforeUnmount, computed } from 'vue'\n\nexport default {\n  name: 'App',\n  components: {\n    HeaderArea,\n    PageOne,\n    PageTwo,\n    PageThree,\n    PageFour,\n    FooterArea,\n  },\n  data() {\n    return {\n      \n    }\n  },\n\n  \n  methods: {\n  },\n  setup() {\n    const footerArea = ref(null)\n    const mainPage = ref(null)\n    const heightPercentage = ref(null)\n    const LastHeightPercentage = ref(null)\n    const timer = ref(null)\n    const setList = ref(\n      {\n        activePageIndex : 0,\n        eventRoading: false,\n        emptyArr: [],\n      }\n    )\n\n    onMounted(() => {\n      window.scrollTo(0, 0);\n      //{passive : false}는 이 함수가 작동하는지에 대해 능동적 감시를 false 시킨다.\n      window.addEventListener(\"scroll\", function(e){\n        e.preventDefault(); // 기본 이벤트 차단 \n      },{passive : false});\n\n      document.addEventListener('scroll', onScroll);\n      \n      // 각 페이지의 .top 높이 구하기\n      const boxArray = mainPage.value.children;\n      for(let i = 0; i < boxArray.length; i++){\n        // console.log(boxArray[i].getBoundingClientRect().top);\n        setList.value.emptyArr[i] = `${boxArray[i].getBoundingClientRect().top}`;\n      }\n      console.log(setList.value.emptyArr);\n    })\n    onBeforeUnmount(() => {\n      document.removeEventListener('scroll', onScroll);\n    })\n    \n    const onScroll = (() => {\n      if(timer.value !== null) {\n        clearTimeout(timer.value);        \n      }\n      timer.value = setTimeout(function() {\n        \n        // vh 단위 퍼센테이지 구하기\n        heightPercentage.value = window.scrollY / window.outerHeight * 100\n        console.log(\"window.scrollTop : \"  + heightPercentage.value);\n        // scroll direction(방향) 확인\n        const scrollDirection = heightPercentage.value > LastHeightPercentage.value ? \"Down\" : \"Up\";\n        console.log(\"scrollDirection : \"+scrollDirection);\n        // 현재의 스크롤 값을 저장\n        LastHeightPercentage.value = heightPercentage.value;\n        if(scrollDirection === \"Down\"){\n          if(setList.value.activePageIndex >= setList.value.emptyArr.length - 1){\n            // console.log(setList.value.emptyArr.length);\n            // console.log(setList.value.activePageIndex);\n            if(setList.value.activePageIndex == setList.value.emptyArr.length - 1){\n              setList.value.activePageIndex = setList.value.emptyArr.length - 1\n              // setList.value.activePageIndex = setList.value.emptyArr.length - 1\n              // console.log(setList.value.emptyArr.length);\n              // console.log(setList.value.activePageIndex);\n            }\n          }else{\n            setList.value.activePageIndex++;\n            console.log(setList.value.activePageIndex);\n          }\n        }else{\n          if(setList.value.activePageIndex < 0){\n            setList.value.activePageIndex = 0\n            console.log(setList.value.activePageIndex);\n          }else{\n            setList.value.activePageIndex--;\n            console.log(setList.value.activePageIndex);\n          }\n        }\n\n      }, 150);\n    });\n\n    const firstPageTopMove = computed(() => {\n      if(setList.value.activePageIndex < 0){\n        return \"0\";\n      }else{\n        // console.log((-100 * setList.value.activePageIndex) + \"vh\")\n        return (-100 * setList.value.activePageIndex) + \"vh\";\n      }\n    });\n\n    const secondPageTopMove = computed(() => {\n      if(setList.value.activePageIndex >= 0){\n        // console.log(100 + (-100 * setList.value.activePageIndex) + \"vh\")\n        return 100 + (-100 * setList.value.activePageIndex) + \"vh\";\n      }else{\n        return \"100vh\";\n      }\n    });\n\n    const thirdPageTopMove = computed(() => {\n      if(setList.value.activePageIndex >= 0){\n        // console.log(200 + (-100 * setList.value.activePageIndex) + \"vh\")\n        return 200 + (-100 * setList.value.activePageIndex) + \"vh\";\n      }else{\n        return \"200vh\";\n      }\n    });\n\n    const fourthPageTopMove = computed(() => {\n      if(setList.value.activePageIndex >= 0){\n        console.log(300 + (-100 * setList.value.activePageIndex) + \"vh\")\n        if(setList.value.activePageIndex == setList.value.emptyArr.length - 1){\n          return \"calc(0vh - 64px)\"\n        }else{\n          return 300 + (-100 * setList.value.activePageIndex) + \"vh\";\n        }\n      }else{\n        return \"300vh\";\n      }\n    });\n\n    const footerTopMove = computed(() => {\n      if(setList.value.activePageIndex == setList.value.emptyArr.length - 1){\n        return \"calc(100vh - 64px)\"\n      }else{\n        return \"100vh\";\n      }\n    });\n\n    return {\n      footerArea,\n      mainPage,\n      timer,\n      heightPercentage,\n      LastHeightPercentage,\n      setList,\n      firstPageTopMove,\n      secondPageTopMove,\n      thirdPageTopMove,\n      fourthPageTopMove,\n      footerTopMove,\n    }\n  },\n} \n</script>\n\n<style lang=\"scss\">\n  @import \"./assets/scss/main.scss\";\n  body {\n    height: 5000vh;\n  }\n  .page {\n    .index-page-01 {\n      z-index: 10;\n      width: 100%;\n      height: 100vh;\n      position: fixed;\n      top: v-bind('firstPageTopMove');\n      left: 0;\n      overflow: hidden;\n      transition: top 0.3s;\n    }\n    \n    .index-page-02 { \n      z-index: 9;\n      width: 100%;\n      height: 100vh;\n      position: fixed;\n      top: v-bind('secondPageTopMove');\n      left: 0;\n      overflow: hidden;\n      transition: top 0.3s;\n      background-color: red;\n    }\n    \n    .index-page-03 { \n      z-index: 8;\n      width: 100%;\n      height: 100vh;\n      position: fixed;\n      top: v-bind('thirdPageTopMove');\n      left: 0;\n      overflow: hidden;\n      transition: top 0.3s;\n      background-color: orange;\n    }\n    \n    .index-page-04 { \n      z-index: 7;\n      width: 100%;\n      height: 100vh;\n      position: fixed;\n      top: v-bind('fourthPageTopMove');\n      left: 0;\n      overflow: hidden;\n      transition: top 0.3s;\n      background-color: yellow;\n    }\n  }\n  \n  .footerArea {\n    position: fixed;\n    // top: calc(100% - 64px);\n    transition: top 0.3s;\n    top: v-bind('footerTopMove');\n    left: 0;\n    width: 100%;\n    height: 64px;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    padding: 0 100px;\n    background-color: skyblue;\n    z-index: 100;\n  }\n\n</style>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}