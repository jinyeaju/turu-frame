{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"page\",\n  ref: \"mainPage\"\n};\nconst _hoisted_2 = {\n  class: \"footerArea\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_HeaderArea = _resolveComponent(\"HeaderArea\");\n  const _component_PageOne = _resolveComponent(\"PageOne\");\n  const _component_PageTwo = _resolveComponent(\"PageTwo\");\n  const _component_PageThree = _resolveComponent(\"PageThree\");\n  const _component_PageFour = _resolveComponent(\"PageFour\");\n  const _component_FooterArea = _resolveComponent(\"FooterArea\");\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createVNode(_component_HeaderArea, {\n    hPercent: $setup.heightPercentage\n  }, null, 8 /* PROPS */, [\"hPercent\"]), _createElementVNode(\"div\", _hoisted_1, [_createVNode(_component_PageOne, {\n    class: \"index-page-01 pageOne\",\n    hPercent: $setup.heightPercentage\n  }, null, 8 /* PROPS */, [\"hPercent\"]), _createVNode(_component_PageTwo, {\n    class: \"index-page-02 pageTwo\",\n    hPercent: $setup.heightPercentage - 100\n  }, null, 8 /* PROPS */, [\"hPercent\"]), _createVNode(_component_PageThree, {\n    class: \"index-page-03 pageThree\",\n    hPercent: $setup.heightPercentage - 200\n  }, null, 8 /* PROPS */, [\"hPercent\"]), _createVNode(_component_PageFour, {\n    class: \"index-page-04 pageFour\",\n    hPercent: $setup.heightPercentage - 300\n  }, null, 8 /* PROPS */, [\"hPercent\"]), _createElementVNode(\"div\", _hoisted_2, [_createVNode(_component_FooterArea, {\n    class: \"index-page-05\",\n    hPercent: $setup.heightPercentage,\n    ref: \"footerArea\"\n  }, null, 8 /* PROPS */, [\"hPercent\"])])], 512 /* NEED_PATCH */)], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"mappings":";;EAEOA,KAAK,EAAC,MAAM;EAACC,GAAG,EAAC;;;EAKfD,KAAK,EAAC;AAAY;;;;;;;;6DANzBE,aAA0CC;IAA7BC,QAAQ,EAAEC;EAAgB,uCACvCC,oBAQM,OARNC,UAQM,GAPJL,aAAqEM;IAA5DR,KAAK,EAAC,uBAAuB;IAAEI,QAAQ,EAAEC;yCAClDH,aAA2EO;IAAlET,KAAK,EAAC,uBAAuB;IAAEI,QAAQ,EAAEC,uBAAgB;yCAClEH,aAA+EQ;IAApEV,KAAK,EAAC,yBAAyB;IAAEI,QAAQ,EAAEC,uBAAgB;yCACtEH,aAA6ES;IAAnEX,KAAK,EAAC,wBAAwB;IAAEI,QAAQ,EAAEC,uBAAgB;yCACpEC,oBAEM,OAFNM,UAEM,GADJV,aAAiFW;IAArEb,KAAK,EAAC,eAAe;IAAEI,QAAQ,EAAEC,uBAAgB;IAAEJ,GAAG,EAAC","names":["class","ref","_createVNode","_component_HeaderArea","hPercent","$setup","_createElementVNode","_hoisted_1","_component_PageOne","_component_PageTwo","_component_PageThree","_component_PageFour","_hoisted_2","_component_FooterArea"],"sourceRoot":"","sources":["/Users/lisn_131/Documents/GitHub/first-study/basic-project/turu-frame/src/App.vue"],"sourcesContent":["<template>\n  <HeaderArea :hPercent=\"heightPercentage\"/>\n  <div class=\"page\" ref=\"mainPage\">\n    <PageOne class=\"index-page-01 pageOne\" :hPercent=\"heightPercentage\"/>\n    <PageTwo class=\"index-page-02 pageTwo\" :hPercent=\"heightPercentage - 100\"/>\n    <PageThree class=\"index-page-03 pageThree\" :hPercent=\"heightPercentage - 200\"/>\n    <PageFour class=\"index-page-04 pageFour\" :hPercent=\"heightPercentage - 300\"/>\n    <div class=\"footerArea\">\n      <FooterArea class=\"index-page-05\" :hPercent=\"heightPercentage\" ref=\"footerArea\"/>\n    </div>\n  </div>\n  \n</template>\n\n<script>\nimport HeaderArea from './components/HeaderArea.vue'\nimport PageOne from './components/PageOne.vue'\nimport PageTwo from './components/PageTwo.vue'\nimport PageThree from './components/PageThree.vue'\nimport PageFour from './components/PageFour.vue'\nimport FooterArea from './components/FooterArea.vue'\nimport { ref, onMounted, onBeforeUnmount, computed } from 'vue'\n\nexport default {\n  name: 'App',\n  components: {\n    HeaderArea,\n    PageOne,\n    PageTwo,\n    PageThree,\n    PageFour,\n    FooterArea,\n  },\n  data() {\n    return {\n      \n    }\n  },\n\n  \n  methods: {\n  },\n  setup() {\n    const footerArea = ref(null)\n    const mainPage = ref(null)\n    const heightPercentage = ref(null)\n    const LastHeightPercentage = ref(null)\n    const timer = ref(null)\n    const setList = ref(\n      {\n        activePageIndex : 0,\n        eventRoading: false,\n        emptyArr: [],\n      }\n    )\n\n    onMounted(() => {\n      window.scrollTo(0, 0);\n      //{passive : false}는 이 함수가 작동하는지에 대해 능동적 감시를 false 시킨다.\n      window.addEventListener(\"scroll\", function(e){\n        e.preventDefault(); // 기본 이벤트 차단 \n      },{passive : false});\n\n      document.addEventListener('scroll', onScroll);\n      \n      // 각 페이지의 .top 높이 구하기\n      const boxArray = mainPage.value.children;\n      for(let i = 0; i < boxArray.length; i++){\n        // console.log(boxArray[i].getBoundingClientRect().top);\n        setList.value.emptyArr[i] = `${boxArray[i].getBoundingClientRect().top}`;\n      }\n      console.log(setList.value.emptyArr);\n    })\n    onBeforeUnmount(() => {\n      document.removeEventListener('scroll', onScroll);\n    })\n    \n    const onScroll = (() => {\n      if(setList.value.eventRoading === true){\n        // document.removeEventListener('wheel', onMouseWheel);\n        // event.stopImmediatePropagation();\n        return;\n      }\n      // event.stopImmediatePropagation();\n\n      // event chceck\n      // console.log(event)\n\n      // console.log(setList.value.activePageIndex + 1)\n\n      setList.value.eventRoading = true;\n      setTimeout(() => {\n        setList.value.eventRoading = false;\n        // console.log(\"setList.value.eventRoading : \"+setList.value.eventRoading)\n      }, 400);\n      // console.log(\"setList.value.eventRoading : \"+setList.value.eventRoading)\n\n      // if(timer.value !== null) {\n      //   clearTimeout(timer.value);        \n      // }\n      // timer.value = setTimeout(function() {\n        \n        // vh 단위 퍼센테이지 구하기\n        heightPercentage.value = window.scrollY / window.outerHeight * 100\n        console.log(\"window.scrollTop : \"  + heightPercentage.value);\n        // scroll direction(방향) 확인\n        const scrollDirection = heightPercentage.value > LastHeightPercentage.value ? \"Down\" : \"Up\";\n        console.log(\"Last scrollTop : \"+LastHeightPercentage.value);\n        console.log(\"scrollDirection : \"+scrollDirection);\n        // 현재의 스크롤 값을 저장\n        LastHeightPercentage.value = heightPercentage.value;\n        if(scrollDirection === \"Down\"){\n          if(setList.value.activePageIndex >= setList.value.emptyArr.length - 1){\n            // console.log(setList.value.emptyArr.length);\n            // console.log(setList.value.activePageIndex);\n            if(setList.value.activePageIndex = setList.value.emptyArr.length - 1){\n              setList.value.activePageIndex = setList.value.emptyArr.length - 1\n              // setList.value.activePageIndex = setList.value.emptyArr.length - 1\n              // console.log(setList.value.emptyArr.length);\n              // console.log(setList.value.activePageIndex);\n            }\n          }else{\n            setList.value.activePageIndex++;\n            console.log(setList.value.activePageIndex);\n          }\n        }else{\n          if(setList.value.activePageIndex <= 0){\n            setList.value.activePageIndex = 0\n            console.log(setList.value.activePageIndex);\n          }else{\n            setList.value.activePageIndex--;\n            console.log(setList.value.activePageIndex);\n          }\n        }\n\n      // }, 150);\n    });\n\n    const firstPageTopMove = computed(() => {\n      if(setList.value.activePageIndex < 0){\n        return \"0\";\n      }else{\n        // console.log((-100 * setList.value.activePageIndex) + \"vh\")\n        return (-100 * setList.value.activePageIndex) + \"vh\";\n      }\n    });\n\n    // const secondPageTopMove = computed(() => {\n    //   if(setList.value.activePageIndex >= 0){\n    //     // console.log(100 + (-100 * setList.value.activePageIndex) + \"vh\")\n    //     return 100 + (-100 * setList.value.activePageIndex) + \"vh\";\n    //   }else{\n    //     return \"100vh\";\n    //   }\n    // });\n\n    // const thirdPageTopMove = computed(() => {\n    //   if(setList.value.activePageIndex >= 0){\n    //     // console.log(200 + (-100 * setList.value.activePageIndex) + \"vh\")\n    //     return 200 + (-100 * setList.value.activePageIndex) + \"vh\";\n    //   }else{\n    //     return \"200vh\";\n    //   }\n    // });\n\n    // const fourthPageTopMove = computed(() => {\n    //   if(setList.value.activePageIndex >= 0){\n    //     console.log(300 + (-100 * setList.value.activePageIndex) + \"vh\")\n    //     if(setList.value.activePageIndex == setList.value.emptyArr.length - 1){\n    //       return \"calc(0vh - 64px)\"\n    //     }else{\n    //       return 300 + (-100 * setList.value.activePageIndex) + \"vh\";\n    //     }\n    //   }else{\n    //     return \"300vh\";\n    //   }\n    // });\n\n    // const footerTopMove = computed(() => {\n    //   if(setList.value.activePageIndex == setList.value.emptyArr.length - 1){\n    //     return \"calc(100vh - 64px)\"\n    //   }else{\n    //     return \"100vh\";\n    //   }\n    // });\n\n    return {\n      footerArea,\n      mainPage,\n      timer,\n      heightPercentage,\n      LastHeightPercentage,\n      setList,\n      firstPageTopMove,\n      // secondPageTopMove,\n      // thirdPageTopMove,\n      // fourthPageTopMove,\n      // footerTopMove,\n    }\n  },\n} \n</script>\n\n<style lang=\"scss\">\n  @import \"./assets/scss/main.scss\";\n  body {\n    height: 5000vh;\n  }\n  .page {\n    position: fixed;\n    top: 0;\n    left: 50%;\n    transform: translate(-50%, v-bind('firstPageTopMove')); //translate(-50%, (0, -100vh, -200vh, ...))\n    width: 100%;\n    .index-page-01 {\n      z-index: 10;\n      width: 100%;\n      height: 100vh;\n      position: relative;\n      // top: v-bind('firstPageTopMove');\n      // left: 0;\n      overflow: hidden;\n      // transition: top 0.3s;\n    }\n    \n    .index-page-02 { \n      z-index: 9;\n      width: 100%;\n      height: 100vh;\n      position: relative;\n      // top: v-bind('secondPageTopMove');\n      // left: 0;\n      overflow: hidden;\n      // transition: top 0.3s;\n      background-color: red;\n    }\n    \n    .index-page-03 { \n      z-index: 8;\n      width: 100%;\n      height: 100vh;\n      position: relative;\n      // top: v-bind('thirdPageTopMove');\n      // left: 0;\n      overflow: hidden;\n      // transition: top 0.3s;\n      background-color: orange;\n    }\n    \n    .index-page-04 { \n      z-index: 7;\n      width: 100%;\n      height: 100vh;\n      position: relative;\n      // top: v-bind('fourthPageTopMove');\n      // left: 0;\n      overflow: hidden;\n      // transition: top 0.3s;\n      background-color: yellow;\n    }\n  }\n  \n  .footerArea {\n    position: relative;\n    // top: calc(100% - 64px);\n    transition: top 0.3s;\n    // top: v-bind('footerTopMove');\n    // left: 0;\n    width: 100%;\n    height: 64px;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    padding: 0 100px;\n    background-color: skyblue;\n    z-index: 100;\n  }\n\n</style>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}