{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"page\",\n  ref: \"mainPage\"\n};\nconst _hoisted_2 = {\n  class: \"footerArea child\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_HeaderArea = _resolveComponent(\"HeaderArea\");\n  const _component_PageOne = _resolveComponent(\"PageOne\");\n  const _component_PageTwo = _resolveComponent(\"PageTwo\");\n  const _component_PageThree = _resolveComponent(\"PageThree\");\n  const _component_PageFour = _resolveComponent(\"PageFour\");\n  const _component_FooterArea = _resolveComponent(\"FooterArea\");\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createVNode(_component_HeaderArea), _createElementVNode(\"div\", _hoisted_1, [_createVNode(_component_PageOne, {\n    class: \"index-page-01 pageOne child\"\n  }), _createVNode(_component_PageTwo, {\n    class: \"index-page-02 pageTwo child\"\n  }), _createVNode(_component_PageThree, {\n    class: \"index-page-03 pageThree child\"\n  }), _createVNode(_component_PageFour, {\n    class: \"index-page-04 pageFour child\"\n  }), _createElementVNode(\"div\", _hoisted_2, [_createVNode(_component_FooterArea, {\n    class: \"index-page-05\",\n    ref: \"footerArea\"\n  }, null, 512 /* NEED_PATCH */)])], 512 /* NEED_PATCH */)], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"mappings":";;EAEOA,KAAK,EAAC,MAAM;EAACC,GAAG,EAAC;;;EAKfD,KAAK,EAAC;AAAkB;;;;;;;;6DAN/BE,aAAcC,wBACdC,oBAQM,OARNC,UAQM,GAPJH,aAA8CI;IAArCN,KAAK,EAAC;EAA6B,IAC5CE,aAA8CK;IAArCP,KAAK,EAAC;EAA6B,IAC5CE,aAAkDM;IAAvCR,KAAK,EAAC;EAA+B,IAChDE,aAAgDO;IAAtCT,KAAK,EAAC;EAA8B,IAC9CI,oBAEM,OAFNM,UAEM,GADJR,aAAoDS;IAAxCX,KAAK,EAAC,eAAe;IAACC,GAAG,EAAC","names":["class","ref","_createVNode","_component_HeaderArea","_createElementVNode","_hoisted_1","_component_PageOne","_component_PageTwo","_component_PageThree","_component_PageFour","_hoisted_2","_component_FooterArea"],"sourceRoot":"","sources":["/Users/lisn_131/Documents/GitHub/first-study/basic-project/turu-frame/src/App.vue"],"sourcesContent":["<template>\n  <HeaderArea />\n  <div class=\"page\" ref=\"mainPage\">\n    <PageOne class=\"index-page-01 pageOne child\"/>\n    <PageTwo class=\"index-page-02 pageTwo child\"/>\n    <PageThree class=\"index-page-03 pageThree child\"/>\n    <PageFour class=\"index-page-04 pageFour child\"/>\n    <div class=\"footerArea child\">\n      <FooterArea class=\"index-page-05\" ref=\"footerArea\"/>\n    </div>\n  </div>\n</template>\n\n<script>\nimport HeaderArea from './components/HeaderArea.vue'\nimport PageOne from './components/PageOne.vue'\nimport PageTwo from './components/PageTwo.vue'\nimport PageThree from './components/PageThree.vue'\nimport PageFour from './components/PageFour.vue'\nimport FooterArea from './components/FooterArea.vue'\nimport { ref, onMounted, onBeforeUnmount, computed } from 'vue'\n// import { ref, onMounted, onBeforeUnmount } from 'vue'\n\nexport default {\n  name: 'App',\n  components: {\n    HeaderArea,\n    PageOne,\n    PageTwo,\n    PageThree,\n    PageFour,\n    FooterArea,\n  },\n  data() {\n    return {\n      \n    }\n  },\n\n  \n  methods: {\n  },\n  setup() {\n    const prevScroll = ref(null);\n    const scrollDirection = ref(null);\n    const footerArea = ref(null)\n    const mainPage = ref(null)\n    const heightPercentage = ref(null)\n    const LastScrollY = ref(null)\n    const timer = ref(null)\n    const setList = ref(\n      {\n        activePageIndex : 0,\n        eventRoading: false,\n        emptyArr: [],\n      }\n    )\n\n    onMounted(() => {\n      window.scrollTo(0, 0);\n      //{passive : false}는 이 함수가 작동하는지에 대해 능동적 감시를 false 시킨다.\n      window.addEventListener(\"scroll\", function(e){\n        e.preventDefault(); // 기본 이벤트 차단 \n      },{passive : false});\n\n      document.addEventListener('scroll', onScroll);\n      \n      // 각 페이지의 .top 높이 구하기\n      const boxArray = mainPage.value.children;\n      for(let i = 0; i < boxArray.length; i++){\n        // console.log(boxArray[i].getBoundingClientRect().top);\n        setList.value.emptyArr[i] = `${boxArray[i].getBoundingClientRect().top}`;\n      }\n      console.log(setList.value.emptyArr);\n    })\n    onBeforeUnmount(() => {\n      document.removeEventListener('scroll', onScroll);\n    })\n    \n    const onScroll = (() => {\n      const currScroll = window.scrollY;\n      console.log(\"currScroll : \" + currScroll)\n      console.log(\"prevScroll.value : \" + prevScroll.value)\n      if (prevScroll.value > currScroll) {\n        scrollDirection.value = 'Up'; \n      }\n      else {\n        scrollDirection.value = 'Down';\n      }\n      prevScroll.value = currScroll;\n      console.log(scrollDirection.value)\n\n      if(setList.value.eventRoading === true){\n        return;\n      }\n      \n      setList.value.eventRoading = true;\n      setTimeout(() => {\n        setList.value.eventRoading = false;\n        // console.log(\"setList.value.eventRoading : \"+setList.value.eventRoading)\n      }, 400);\n      // console.log(\"setList.value.eventRoading : \"+setList.value.eventRoading)\n\n      // if(timer.value !== null) {\n      //   clearTimeout(timer.value);        \n      // }\n      // timer.value = setTimeout(function() {\n        \n        // vh 단위 퍼센테이지 구하기\n      heightPercentage.value = window.scrollY / window.outerHeight * 100\n\n      // if(scrollDirection.value === \"Down\"){\n      //   if(setList.value.activePageIndex >= setList.value.emptyArr.length - 1){\n      //     // console.log(setList.value.emptyArr.length);\n      //     // console.log(setList.value.activePageIndex);\n      //     // if(setList.value.activePageIndex == setList.value.emptyArr.length - 1){\n      //       setList.value.activePageIndex = setList.value.emptyArr.length - 1\n      //       // setList.value.activePageIndex = setList.value.emptyArr.length - 1\n      //       // console.log(setList.value.emptyArr.length);\n      //       // console.log(setList.value.activePageIndex);\n      //     // }\n      //   }else{\n      //     setList.value.activePageIndex++;\n      //     console.log(setList.value.activePageIndex);\n      //   }\n      // }else if(scrollDirection.value === \"Up\"){\n      //   if(setList.value.activePageIndex <= 0){\n      //     setList.value.activePageIndex = 0\n      //     console.log(setList.value.activePageIndex);\n      //   }else{\n      //     setList.value.activePageIndex--;\n      //     console.log(setList.value.activePageIndex);\n      //   }\n      // }else{\n      //   console.log(\"scroll error\")\n      // }\n      // const sTop = setList.value.emptyArr[setList.value.activePageIndex - 1]\n      // console.log(\"sTop : \" + sTop)\n      // window.scrollTo({top: sTop, behavior:\"smooth\" })\n\n        if(scrollDirection === \"Down\"){\n          onScrollDown()\n        }else if(scrollDirection === \"Up\"){\n          onScrollUp()\n        }else{\n          console.log(\"scroll error\")\n        }\n\n\n      // }, 150);\n    });\n\n    const onScrollDown = (() => {\n      if(setList.value.activePageIndex >= setList.value.emptyArr.length - 1){\n        // console.log(setList.value.emptyArr.length);\n        // console.log(setList.value.activePageIndex);\n        // if(setList.value.activePageIndex == setList.value.emptyArr.length - 1){\n          setList.value.activePageIndex = setList.value.emptyArr.length - 1\n          // setList.value.activePageIndex = setList.value.emptyArr.length - 1\n          // console.log(setList.value.emptyArr.length);\n          // console.log(setList.value.activePageIndex);\n        // }\n      }else{\n        setList.value.activePageIndex++;\n        console.log(setList.value.activePageIndex);\n      }\n    });\n    const onScrollUp = (() => {\n      if(setList.value.activePageIndex <= 0){\n        setList.value.activePageIndex = 0\n        console.log(setList.value.activePageIndex);\n      }else{\n        setList.value.activePageIndex--;\n        console.log(setList.value.activePageIndex);\n      }\n    });\n    // window.scrollTo({top: setList.value.emptyArr[setList.value.activePageIndex - 1], behavior:\"smooth\" })\n\n    const pageTopMove = computed(() => {\n      if(setList.value.activePageIndex < 0){\n        return \"0\";\n      }else{\n        return setList.value.activePageIndex == setList.value.emptyArr.length - 1 ? \"calc(-300vh - 64px)\" : (-100 * setList.value.activePageIndex) + \"vh\";\n      }\n    });\n\n\n    return {\n      prevScroll,\n      scrollDirection,\n      footerArea,\n      mainPage,\n      timer,\n      heightPercentage,\n      LastScrollY,\n      setList,\n      pageTopMove,\n    }\n  },\n} \n</script>\n\n<style lang=\"scss\">\n  @import \"./assets/scss/main.scss\";\n  body {\n    height: calc(500vh + 64px);\n    height: 1000vh;\n  }\n  .page {\n    position: fixed;\n    top: 0;\n    left: 50%;\n    transform: translate(-50%, v-bind('pageTopMove')); //translate(-50%, (0, -100vh, -200vh, ...))\n    // transform: translateX(-50%);\n    transition: transform 0.3s ease-in;\n    width: 100%;\n    .index-page-01 {\n      z-index: 10;\n      width: 100%;\n      height: 100vh;\n      position: relative;\n      // top: v-bind('firstPageTopMove');\n      // left: 0;\n      overflow: hidden;\n      // transition: top 0.3s;\n    }\n    \n    .index-page-02 { \n      z-index: 9;\n      width: 100%;\n      height: 100vh;\n      position: relative;\n      // top: v-bind('secondPageTopMove');\n      // left: 0;\n      overflow: hidden;\n      // transition: top 0.3s;\n      background-color: red;\n    }\n    \n    .index-page-03 { \n      z-index: 8;\n      width: 100%;\n      height: 100vh;\n      position: relative;\n      // top: v-bind('thirdPageTopMove');\n      // left: 0;\n      overflow: hidden;\n      // transition: top 0.3s;\n      background-color: orange;\n    }\n    \n    .index-page-04 { \n      z-index: 7;\n      width: 100%;\n      height: 100vh;\n      position: relative;\n      // top: v-bind('fourthPageTopMove');\n      // left: 0;\n      overflow: hidden;\n      // transition: top 0.3s;\n      background-color: yellow;\n    }\n  }\n  \n  .footerArea {\n    position: relative;\n    // top: calc(100% - 64px);\n    transition: top 0.3s;\n    // top: v-bind('footerTopMove');\n    // left: 0;\n    width: 100%;\n    height: 64px;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    padding: 0 100px;\n    background-color: skyblue;\n    z-index: 100;\n  }\n\n</style>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}